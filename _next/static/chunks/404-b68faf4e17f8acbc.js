"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[404],{797:function(e,r,n){function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function o(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"===typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(r,{Z:function(){return o}})},2941:function(e,r,n){n.d(r,{qQ:function(){return L}});const t="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",o=["1-0","0-1","1/2-1/2","*"],i={b:[16,32,17,15],w:[-16,-32,-17,-15]},f={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},u=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],a=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],l={p:0,n:1,b:2,r:3,q:4,k:5},c={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},s={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},p={w:[{square:s.a1,flag:c.QSIDE_CASTLE},{square:s.h1,flag:c.KSIDE_CASTLE}],b:[{square:s.a8,flag:c.QSIDE_CASTLE},{square:s.h8,flag:c.KSIDE_CASTLE}]};function h(e){var r=e.charAt(0);if(r>="a"&&r<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return S}return"o"===(r=r.toLowerCase())?I:r}function g(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function v(e){return e>>4}function d(e){return 15&e}function b(e){var r=d(e),n=v(e);return"abcdefgh".substring(r,r+1)+"87654321".substring(n,n+1)}function m(e){return e===A?_:A}function E(e){var r=e instanceof Array?[]:{};for(var n in e)r[n]="object"===typeof n?E(e[n]):e[n];return r}function y(e){return e.replace(/^\s+|\s+$/g,"")}const _="b",A="w",C=-1,S="p",w="b",I="k",T=(function(){for(var e=[],r=s.a8;r<=s.h1;r++)136&r?r+=7:e.push(b(r))}(),{NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"}),L=function(e){var r=new Array(128),n={w:C,b:C},L=A,P={w:0,b:0},R=C,k=0,O=1,N=[],q={},D={};function Q(e){"undefined"===typeof e&&(e=!1),r=new Array(128),n={w:C,b:C},L=A,P={w:0,b:0},R=C,k=0,O=1,N=[],e||(q={}),D={},M($())}function U(){for(var e=[],r={},n=function(e){e in D&&(r[e]=D[e])};N.length>0;)e.push(te());for(n($());e.length>0;)ne(e.pop()),n($());D=r}function K(){j(t)}function j(e,r){"undefined"===typeof r&&(r=!1);var n=e.split(/\s+/),t=n[0],o=0;if(!x(e).valid)return!1;Q(r);for(var i=0;i<t.length;i++){var f=t.charAt(i);if("/"===f)o+=8;else if(-1!=="0123456789".indexOf(f))o+=parseInt(f,10);else{var u=f<"a"?A:_;F({type:f.toLowerCase(),color:u},b(o)),o++}}return L=n[1],n[2].indexOf("K")>-1&&(P.w|=c.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(P.w|=c.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(P.b|=c.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(P.b|=c.QSIDE_CASTLE),R="-"===n[3]?C:s[n[3]],k=parseInt(n[4],10),O=parseInt(n[5],10),M($()),!0}function x(e){var r="No errors.",n="FEN string must contain six space-delimited fields.",t="6th field (move number) must be a positive integer.",o="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",f="3rd field (castling availability) is invalid.",u="2nd field (side to move) is invalid.",a="1st field (piece positions) does not contain 8 '/'-delimited rows.",l="1st field (piece positions) is invalid [consecutive numbers].",c="1st field (piece positions) is invalid [invalid piece].",s="1st field (piece positions) is invalid [row too large].",p="Illegal en-passant square",h=e.split(/\s+/);if(6!==h.length)return{valid:!1,error_number:1,error:n};if(isNaN(parseInt(h[5]))||parseInt(h[5],10)<=0)return{valid:!1,error_number:2,error:t};if(isNaN(parseInt(h[4]))||parseInt(h[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(h[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(h[2]))return{valid:!1,error_number:5,error:f};if(!/^(w|b)$/.test(h[1]))return{valid:!1,error_number:6,error:u};var g=h[0].split("/");if(8!==g.length)return{valid:!1,error_number:7,error:a};for(var v=0;v<g.length;v++){for(var d=0,b=!1,m=0;m<g[v].length;m++)if(isNaN(g[v][m])){if(!/^[prnbqkPRNBQK]$/.test(g[v][m]))return{valid:!1,error_number:9,error:c};d+=1,b=!1}else{if(b)return{valid:!1,error_number:8,error:l};d+=parseInt(g[v][m],10),b=!0}if(8!==d)return{valid:!1,error_number:10,error:s}}return"3"==h[3][1]&&"w"==h[1]||"6"==h[3][1]&&"b"==h[1]?{valid:!1,error_number:11,error:p}:{valid:!0,error_number:0,error:r}}function $(){for(var e=0,n="",t=s.a8;t<=s.h1;t++){if(null==r[t])e++;else{e>0&&(n+=e,e=0);var o=r[t].color,i=r[t].type;n+=o===A?i.toUpperCase():i.toLowerCase()}t+1&136&&(e>0&&(n+=e),t!==s.h1&&(n+="/"),e=0,t+=8)}var f="";P[A]&c.KSIDE_CASTLE&&(f+="K"),P[A]&c.QSIDE_CASTLE&&(f+="Q"),P[_]&c.KSIDE_CASTLE&&(f+="k"),P[_]&c.QSIDE_CASTLE&&(f+="q"),f=f||"-";var u=R===C?"-":b(R);return[n,L,f,u,k,O].join(" ")}function B(e){for(var r=0;r<e.length;r+=2)"string"===typeof e[r]&&"string"===typeof e[r+1]&&(q[e[r]]=e[r+1]);return q}function M(e){N.length>0||(e!==t?(q.SetUp="1",q.FEN=e):(delete q.SetUp,delete q.FEN))}function W(e){var n=r[s[e]];return n?{type:n.type,color:n.color}:null}function F(e,t){if(!("type"in e)||!("color"in e))return!1;if(-1==="pnbrqkPNBRQK".indexOf(e.type.toLowerCase()))return!1;if(!(t in s))return!1;var o=s[t];return(e.type!=I||n[e.color]==C||n[e.color]==o)&&(r[o]={type:e.type,color:e.color},e.type===I&&(n[e.color]=o),M($()),!0)}function G(e,r,n,t,o){var i={color:L,from:r,to:n,flags:t,piece:e[r].type};return o&&(i.flags|=c.PROMOTION,i.promotion=o),e[n]?i.captured=e[n].type:t&c.EP_CAPTURE&&(i.captured=S),i}function Z(e){function t(e,r,n,t,o){if(e[n].type!==S||0!==v(t)&&7!==v(t))r.push(G(e,n,t,o));else for(var i=["q","r",w,"n"],f=0,u=i.length;f<u;f++)r.push(G(e,n,t,o,i[f]))}var o=[],u=L,a=m(u),l={b:1,w:6},p=s.a8,h=s.h1,g=!1,d="undefined"===typeof e||!("legal"in e)||e.legal,b="undefined"===typeof e||!("piece"in e)||"string"!==typeof e.piece||e.piece.toLowerCase();if("undefined"!==typeof e&&"square"in e){if(!(e.square in s))return[];p=h=s[e.square],g=!0}for(var E=p;E<=h;E++)if(136&E)E+=7;else{var y=r[E];if(null!=y&&y.color===u)if(y.type!==S||!0!==b&&b!==S){if(!0===b||b===y.type)for(var _=0,A=f[y.type].length;_<A;_++){var C=f[y.type][_];for(T=E;!(136&(T+=C));){if(null!=r[T]){if(r[T].color===u)break;t(r,o,E,T,c.CAPTURE);break}if(t(r,o,E,T,c.NORMAL),"n"===y.type||"k"===y.type)break}}}else{var T=E+i[u][0];if(null==r[T]){t(r,o,E,T,c.NORMAL);var T=E+i[u][1];l[u]===v(E)&&null==r[T]&&t(r,o,E,T,c.BIG_PAWN)}for(_=2;_<4;_++){136&(T=E+i[u][_])||(null!=r[T]&&r[T].color===a?t(r,o,E,T,c.CAPTURE):T===R&&t(r,o,E,R,c.EP_CAPTURE))}}}if((!0===b||b===I)&&(!g||h===n[u])){if(P[u]&c.KSIDE_CASTLE){var k=(O=n[u])+2;null!=r[O+1]||null!=r[k]||H(a,n[u])||H(a,O+1)||H(a,k)||t(r,o,n[u],k,c.KSIDE_CASTLE)}if(P[u]&c.QSIDE_CASTLE){var O;k=(O=n[u])-2;null!=r[O-1]||null!=r[O-2]||null!=r[O-3]||H(a,n[u])||H(a,O-1)||H(a,k)||t(r,o,n[u],k,c.QSIDE_CASTLE)}}if(!d)return o;var N=[];for(E=0,A=o.length;E<A;E++)ne(o[E]),J(u)||N.push(o[E]),te();return N}function z(e,r){var n="";if(e.flags&c.KSIDE_CASTLE)n="O-O";else if(e.flags&c.QSIDE_CASTLE)n="O-O-O";else{if(e.piece!==S){var t=function(e,r){for(var n=e.from,t=e.to,o=e.piece,i=0,f=0,u=0,a=0,l=r.length;a<l;a++){var c=r[a].from,s=r[a].to;o===r[a].piece&&n!==c&&t===s&&(i++,v(n)===v(c)&&f++,d(n)===d(c)&&u++)}return i>0?f>0&&u>0?b(n):u>0?b(n).charAt(1):b(n).charAt(0):""}(e,r);n+=e.piece.toUpperCase()+t}e.flags&(c.CAPTURE|c.EP_CAPTURE)&&(e.piece===S&&(n+=b(e.from)[0]),n+="x"),n+=b(e.to),e.flags&c.PROMOTION&&(n+="="+e.promotion.toUpperCase())}return ne(e),V()&&(X()?n+="#":n+="+"),te(),n}function H(e,n){for(var t=s.a8;t<=s.h1;t++)if(136&t)t+=7;else if(null!=r[t]&&r[t].color===e){var o=r[t],i=t-n,f=i+119;if(u[f]&1<<l[o.type]){if(o.type===S){if(i>0){if(o.color===A)return!0}else if(o.color===_)return!0;continue}if("n"===o.type||"k"===o.type)return!0;for(var c=a[f],p=t+c,h=!1;p!==n;){if(null!=r[p]){h=!0;break}p+=c}if(!h)return!0}}return!1}function J(e){return H(m(e),n[e])}function V(){return J(L)}function X(){return V()&&0===Z().length}function Y(){return!V()&&0===Z().length}function ee(){for(var e={},n=[],t=0,o=0,i=s.a8;i<=s.h1;i++)if(o=(o+1)%2,136&i)i+=7;else{var f=r[i];f&&(e[f.type]=f.type in e?e[f.type]+1:1,f.type===w&&n.push(o),t++)}if(2===t)return!0;if(3===t&&(1===e.b||1===e.n))return!0;if(t===e.b+2){var u=0,a=n.length;for(i=0;i<a;i++)u+=n[i];if(0===u||u===a)return!0}return!1}function re(){for(var e=[],r={},n=!1;;){var t=te();if(!t)break;e.push(t)}for(;;){var o=$().split(" ").slice(0,4).join(" ");if(r[o]=o in r?r[o]+1:1,r[o]>=3&&(n=!0),!e.length)break;ne(e.pop())}return n}function ne(e){var t=L,o=m(t);if(function(e){N.push({move:e,kings:{b:n.b,w:n.w},turn:L,castling:{b:P.b,w:P.w},ep_square:R,half_moves:k,move_number:O})}(e),r[e.to]=r[e.from],r[e.from]=null,e.flags&c.EP_CAPTURE&&(L===_?r[e.to-16]=null:r[e.to+16]=null),e.flags&c.PROMOTION&&(r[e.to]={type:e.promotion,color:t}),r[e.to].type===I){if(n[r[e.to].color]=e.to,e.flags&c.KSIDE_CASTLE){var i=e.to-1,f=e.to+1;r[i]=r[f],r[f]=null}else if(e.flags&c.QSIDE_CASTLE){i=e.to+1,f=e.to-2;r[i]=r[f],r[f]=null}P[t]=""}if(P[t])for(var u=0,a=p[t].length;u<a;u++)if(e.from===p[t][u].square&&P[t]&p[t][u].flag){P[t]^=p[t][u].flag;break}if(P[o])for(u=0,a=p[o].length;u<a;u++)if(e.to===p[o][u].square&&P[o]&p[o][u].flag){P[o]^=p[o][u].flag;break}R=e.flags&c.BIG_PAWN?"b"===L?e.to-16:e.to+16:C,e.piece===S||e.flags&(c.CAPTURE|c.EP_CAPTURE)?k=0:k++,L===_&&O++,L=m(L)}function te(){var e=N.pop();if(null==e)return null;var t=e.move;n=e.kings,L=e.turn,P=e.castling,R=e.ep_square,k=e.half_moves,O=e.move_number;var o,i,f=L,u=m(L);if(r[t.from]=r[t.to],r[t.from].type=t.piece,r[t.to]=null,t.flags&c.CAPTURE)r[t.to]={type:t.captured,color:u};else if(t.flags&c.EP_CAPTURE){var a;a=f===_?t.to-16:t.to+16,r[a]={type:S,color:u}}t.flags&(c.KSIDE_CASTLE|c.QSIDE_CASTLE)&&(t.flags&c.KSIDE_CASTLE?(o=t.to+1,i=t.to-1):t.flags&c.QSIDE_CASTLE&&(o=t.to-2,i=t.to+1),r[o]=r[i],r[i]=null);return t}function oe(e,r){for(var n=g(e),t=0;t<2;t++){if(1==t){if(!r)return null;var o=!1;if(l=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/)){var i=l[1],f=l[2],u=l[3],a=l[4];1==f.length&&(o=!0)}else{var l;if(l=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/)){i=l[1],f=l[2],u=l[3],a=l[4];if(1==f.length)o=!0}}}for(var c=h(n),p=Z({legal:!0,piece:i||c}),v=0,d=p.length;v<d;v++)switch(t){case 0:if(n===g(z(p[v],p)))return p[v];break;case 1:if(l){if(!(i&&i.toLowerCase()!=p[v].piece||s[f]!=p[v].from||s[u]!=p[v].to||a&&a.toLowerCase()!=p[v].promotion))return p[v];if(o){var m=b(p[v].from);if((!i||i.toLowerCase()==p[v].piece)&&s[u]==p[v].to&&(f==m[0]||f==m[1])&&(!a||a.toLowerCase()==p[v].promotion))return p[v]}}}}return null}function ie(e){var r=E(e);r.san=z(r,Z({legal:!0})),r.to=b(r.to),r.from=b(r.from);var n="";for(var t in c)c[t]&r.flags&&(n+=T[t]);return r.flags=n,r}function fe(e){for(var r=Z({legal:!1}),n=0,t=L,o=0,i=r.length;o<i;o++){if(ne(r[o]),!J(t))if(e-1>0)n+=fe(e-1);else n++;te()}return n}return j("undefined"===typeof e?t:e),{load:function(e){return j(e)},reset:function(){return K()},moves:function(e){for(var r=Z(e),n=[],t=0,o=r.length;t<o;t++)"undefined"!==typeof e&&"verbose"in e&&e.verbose?n.push(ie(r[t])):n.push(z(r[t],Z({legal:!0})));return n},in_check:function(){return V()},in_checkmate:function(){return X()},in_stalemate:function(){return Y()},in_draw:function(){return k>=100||Y()||ee()||re()},insufficient_material:function(){return ee()},in_threefold_repetition:function(){return re()},game_over:function(){return k>=100||X()||Y()||ee()||re()},validate_fen:function(e){return x(e)},fen:function(){return $()},board:function(){for(var e=[],n=[],t=s.a8;t<=s.h1;t++)null==r[t]?n.push(null):n.push({square:b(t),type:r[t].type,color:r[t].color}),t+1&136&&(e.push(n),n=[],t+=8);return e},pgn:function(e){var r="object"===typeof e&&"string"===typeof e.newline_char?e.newline_char:"\n",n="object"===typeof e&&"number"===typeof e.max_width?e.max_width:0,t=[],o=!1;for(var i in q)t.push("["+i+' "'+q[i]+'"]'+r),o=!0;o&&N.length&&t.push(r);for(var f=function(e){var r=D[$()];"undefined"!==typeof r&&(e=`${e}${e.length>0?" ":""}{${r}}`);return e},u=[];N.length>0;)u.push(te());var a=[],l="";for(0===u.length&&a.push(f(""));u.length>0;){l=f(l);var c=u.pop();N.length||"b"!==c.color?"w"===c.color&&(l.length&&a.push(l),l=O+"."):l=O+". ...",l=l+" "+z(c,Z({legal:!0})),ne(c)}if(l.length&&a.push(f(l)),"undefined"!==typeof q.Result&&a.push(q.Result),0===n)return t.join("")+a.join(" ");var s=function(){return t.length>0&&" "===t[t.length-1]&&(t.pop(),!0)},p=function(e,o){for(var i of o.split(" "))if(i){if(e+i.length>n){for(;s();)e--;t.push(r),e=0}t.push(i),e+=i.length,t.push(" "),e++}return s()&&e--,e},h=0;for(i=0;i<a.length;i++)h+a[i].length>n&&a[i].includes("{")?h=p(h,a[i]):(h+a[i].length>n&&0!==i?(" "===t[t.length-1]&&t.pop(),t.push(r),h=0):0!==i&&(t.push(" "),h++),t.push(a[i]),h+=a[i].length);return t.join("")},load_pgn:function(e,r){var n="undefined"!==typeof r&&"sloppy"in r&&r.sloppy;function t(e){return e.replace(/\\/g,"\\")}e=e.trim();var i="object"===typeof r&&"string"===typeof r.newline_char?r.newline_char:"\r?\n",f=new RegExp("^(\\[((?:"+t(i)+")|.)*\\])(?:\\s*"+t(i)+"){2}"),u=f.test(e)?f.exec(e)[1]:"";K();var a=function(e,r){for(var n="object"===typeof r&&"string"===typeof r.newline_char?r.newline_char:"\r?\n",o={},i=e.split(new RegExp(t(n))),f="",u="",a=0;a<i.length;a++){var l=/^\s*\[([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;f=i[a].replace(l,"$1"),u=i[a].replace(l,"$2"),y(f).length>0&&(o[f]=u)}return o}(u,r),l="";for(var c in a)"fen"===c.toLowerCase()&&(l=a[c]),B([c,a[c]]);if(n){if(l&&!j(l,!0))return!1}else if("1"===a.SetUp&&(!("FEN"in a)||!j(a.FEN,!0)))return!1;for(var s=function(e){return`{${function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)<128?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/\%/g,"").toLowerCase()})).join("")}((e=e.replace(new RegExp(t(i),"g")," ")).slice(1,e.length-1))}}`},p=function(e){if(e.startsWith("{")&&e.endsWith("}"))return function(e){return 0==e.length?"":decodeURIComponent("%"+e.match(/.{1,2}/g).join("%"))}(e.slice(1,e.length-1))},h=e.replace(u,"").replace(new RegExp(`({[^}]*})+?|;([^${t(i)}]*)`,"g"),(function(e,r,n){return void 0!==r?s(r):" "+s(`{${n.slice(1)}}`)})).replace(new RegExp(t(i),"g")," "),g=/(\([^\(\)]+\))+?/g;g.test(h);)h=h.replace(g,"");var v=y(h=(h=(h=h.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));v=v.join(",").replace(/,,+/g,",").split(",");for(var d="",b="",m=0;m<v.length;m++){var E=p(v[m]);if(void 0===E)if(null==(d=oe(v[m],n))){if(!(o.indexOf(v[m])>-1))return!1;b=v[m]}else b="",ne(d);else D[$()]=E}return b&&Object.keys(q).length&&!q.Result&&B(["Result",b]),!0},header:function(){return B(arguments)},turn:function(){return L},move:function(e,r){var n="undefined"!==typeof r&&"sloppy"in r&&r.sloppy,t=null;if("string"===typeof e)t=oe(e,n);else if("object"===typeof e)for(var o=Z(),i=0,f=o.length;i<f;i++)if(e.from===b(o[i].from)&&e.to===b(o[i].to)&&(!("promotion"in o[i])||e.promotion===o[i].promotion)){t=o[i];break}if(!t)return null;var u=ie(t);return ne(t),u},undo:function(){var e=te();return e?ie(e):null},clear:function(){return Q()},put:function(e,r){return F(e,r)},get:function(e){return W(e)},ascii(){for(var e="   +------------------------+\n",n=s.a8;n<=s.h1;n++){if(0===d(n)&&(e+=" "+"87654321"[v(n)]+" |"),null==r[n])e+=" . ";else{var t=r[n].type;e+=" "+(r[n].color===A?t.toUpperCase():t.toLowerCase())+" "}n+1&136&&(e+="|\n",n+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h"},remove:function(e){return function(e){var t=W(e);return r[s[e]]=null,t&&t.type===I&&(n[t.color]=C),M($()),t}(e)},perft:function(e){return fe(e)},square_color:function(e){if(e in s){var r=s[e];return(v(r)+d(r))%2===0?"light":"dark"}return null},history:function(e){for(var r=[],n=[],t=("undefined"!==typeof e&&"verbose"in e&&e.verbose);N.length>0;)r.push(te());for(;r.length>0;){var o=r.pop();t?n.push(ie(o)):n.push(z(o,Z({legal:!0}))),ne(o)}return n},get_comment:function(){return D[$()]},set_comment:function(e){D[$()]=e.replace("{","[").replace("}","]")},delete_comment:function(){var e=D[$()];return delete D[$()],e},get_comments:function(){return U(),Object.keys(D).map((function(e){return{fen:e,comment:D[e]}}))},delete_comments:function(){return U(),Object.keys(D).map((function(e){var r=D[e];return delete D[e],{fen:e,comment:r}}))}}}}}]);