(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[223],{1929:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/decks/[id]/study",function(){return r(7046)}])},4867:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(5893),i=r(9008),s=r.n(i),c=r(1664),l=r.n(c),a=function(){return(0,n.jsxs)("nav",{className:"flex items-center justify-between flex-wrap bg-gray-800 py-4 sm:p-4",children:[(0,n.jsx)(l(),{href:"/",children:(0,n.jsxs)("div",{className:"flex items-center flex-no-shrink mr-6 cursor-pointer",children:[(0,n.jsx)("svg",{className:"h-8 w-8 mr-1",width:"54",height:"54",viewBox:"-513.255 333.632 334.329 855.093",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"m 7406.29,3006 c -0.04,4.6 -0.22,9.1 -0.53,13.6 -0.03,-0.2 -0.09,-0.5 -0.12,-0.7 -6.46,99.5 -81.6,180.1 -178.62,195 v 34.4 c -0.01,0 -0.02,0 -0.03,0 79.52,340.9 -105.44,646.5 -267.94,931.8 -15.59,27.3 -30.91,54.4 -45.76,81.4 h 126.19 c 18.69,0 29.94,16.1 28.79,31.7 l 0.16,-0.1 -0.06,28.5 c 0.02,0.6 0.01,1.1 0,1.6 v 1.3 h -0.08 c -0.52,8.1 -4.34,16.2 -12.37,21.8 l -264.47,166 c -0.01,0 -0.01,0.1 -0.02,0.1 -7.71,18.6 -15.23,37.4 -22.44,56.4 -253.7,661.2 -240.91,1479.5 -131.28,2176.2 v 0 c 2.85,18.3 5.84,36.5 8.86,54.7 h 63.01 c 94.46,0 186.95,37 266.58,106.6 v 0 c -76.98,134.7 -194.82,213.4 -319.6,213.4 h 19.84 0.06 c 11.64,0 22.14,4.5 30.08,11.9 0.45,0.4 0.97,0.7 1.4,1.1 0.43,0.5 0.74,1 1.15,1.4 7.33,8 11.91,18.5 11.91,30.2 v 0 8.1 0.1 h -0.01 c 0,0.8 -0.07,1.6 -0.11,2.3 -0.01,-0.1 -0.06,-0.3 -0.07,-0.4 -1.01,23.7 -20.42,42.7 -44.41,42.7 h -1.48 c -9.36,64.4 -3.47,139 21.66,204.8 5.49,14.6 11.99,35.8 19.47,52.5 h 85.16 0.14 c 25.78,0 49.14,10.3 66.37,26.9 0.46,0.4 0.96,0.8 1.41,1.2 0.46,0.5 0.87,1 1.32,1.5 16.56,17.3 26.78,40.6 26.78,66.4 v 0.1 l 0.01,0.1 h -0.01 v 0.1 c 0,53 -42.99,96 -96.02,96 h -16.37 c -7.34,385.6 41.41,802.9 257.44,1187.6 l -325.8,-245.5 -0.11,-0.1 c -3.97,10.5 -8.03,20.8 -12.41,31 -2.06,4.6 -4.05,9.3 -6.17,13.8 -95.57,210.4 -279.56,358.6 -494.9,378.7 18.1,6.2 34.77,15.4 49.2,27.3 19.32,16 34.75,36.5 44.64,59.9 3.96,9.3 7.03,19.2 9.12,29.3 2.08,10.2 3.18,20.8 3.18,31.6 0,4.8 -0.29,9.6 -0.73,14.4 -0.14,1.5 -0.36,3.1 -0.54,4.6 -0.4,3.2 -0.88,6.4 -1.47,9.6 -0.31,1.7 -0.63,3.4 -0.99,5 -0.73,3.3 -1.58,6.6 -2.52,9.8 -0.36,1.3 -0.65,2.6 -1.05,3.8 -0.03,0.1 -0.05,0.2 -0.08,0.3 0.01,0 0.01,-0.1 0.02,-0.1 -20.1,63.2 -79.23,109 -149.1,109 -86.4,0 -156.45,-70 -156.45,-156.4 0,-10.8 1.1,-21.3 3.17,-31.5 v 0 0 c 0.06,-0.3 0.13,-0.5 0.18,-0.7 0.96,-4.6 2.12,-9.1 3.45,-13.5 0.48,-1.5 1.07,-3 1.6,-4.6 1.03,-3 2.08,-6 3.29,-9 0.71,-1.7 1.51,-3.4 2.29,-5.1 1.2,-2.7 2.44,-5.3 3.79,-7.9 0.9,-1.7 1.85,-3.4 2.81,-5.1 1.42,-2.5 2.89,-4.9 4.44,-7.3 1.05,-1.6 2.11,-3.2 3.22,-4.8 1.66,-2.4 3.41,-4.7 5.21,-7 1.13,-1.4 2.25,-2.9 3.43,-4.3 2.04,-2.4 4.2,-4.7 6.38,-7 1.07,-1.2 2.1,-2.3 3.21,-3.4 3.35,-3.4 6.81,-6.5 10.45,-9.5 0.1,-0.1 0.21,-0.2 0.31,-0.3 3.55,-2.9 7.24,-5.6 11.03,-8.2 1.29,-0.9 2.65,-1.7 3.97,-2.5 2.68,-1.8 5.38,-3.4 8.16,-5 1.61,-0.9 3.26,-1.7 4.9,-2.5 2.61,-1.4 5.25,-2.7 7.96,-3.9 1.77,-0.8 3.56,-1.5 5.37,-2.2 2.45,-1 4.92,-1.9 7.43,-2.8 -219.92,-20.6 -407.24,-174.9 -500.85,-392.6 -2.06,-4.6 -3.99,-9.3 -5.92,-14 -2.27,-5.6 -4.28,-11.3 -6.43,-16.9 h -0.21 l -325.82,245.6 c 237.19,-384.7 297.74,-802 320.6,-1187.6 h -19.68 c -53.03,0 -96.02,-43 -96.02,-96 v -0.3 c 0,-25.9 10.31,-49.4 26.99,-66.6 0.38,-0.4 0.72,-0.9 1.11,-1.3 0.51,-0.5 1.07,-0.9 1.58,-1.4 17.22,-16.5 40.5,-26.7 66.21,-26.7 h 0.13 85.17 c 7.47,-16.7 13.94,-37.9 19.48,-52.5 25.07,-65.8 31.02,-140.4 21.67,-204.8 h -1.51 c -23.99,0 -43.4,-19 -44.41,-42.7 -0.01,0.1 -0.06,0.3 -0.07,0.4 -0.04,-0.7 -0.1,-1.5 -0.11,-2.2 0,-0.1 -0.01,-0.1 -0.01,-0.1 v -8.2 c 0,-11.8 4.66,-22.5 12.13,-30.4 0.33,-0.4 0.58,-0.8 0.92,-1.2 0.49,-0.4 1.08,-0.8 1.59,-1.3 7.91,-7.2 18.34,-11.7 29.9,-11.7 h -23.58 c -124.78,0 -242.63,-78.7 -319.61,-213.4 v 0 c 79.64,-69.6 172.13,-106.6 266.58,-106.6 h 46.65 c 3.02,-18.2 6,-36.4 8.86,-54.7 v 0 c 109.62,-696.7 122.41,-1515 -131.29,-2176.2 -7.2,-19 -14.72,-37.8 -22.44,-56.4 -0.01,0 -0.01,-0.1 -0.02,-0.1 l -264.61,-166 c -8.11,-5.6 -11.94,-13.8 -12.39,-22.1 l -0.12,0.1 v -1.9 c 0,0 0,-0.1 0,-0.2 V 4291 h 0.02 c 0,-14.9 11.11,-29.5 28.93,-29.5 h 126.34 c -14.86,-27 -30.17,-54.1 -45.76,-81.4 -162.51,-285.3 -347.47,-590.9 -267.95,-931.8 -0.02,0 -0.03,0 -0.05,0 v -34.4 c -97.01,-14.9 -172.13,-95.5 -178.6,-195 -0.03,0.2 -0.09,0.5 -0.12,0.7 -0.31,-4.5 -0.49,-9 -0.52,-13.6 -0.01,-0.3 -0.06,-0.6 -0.06,-1 v -0.3 -0.9 -0.1 c 0,-21.5 8.5,-40.9 22.26,-55.3 0.42,-0.5 0.79,-0.9 1.22,-1.4 0.31,-0.3 0.66,-0.6 0.98,-0.9 14.4,-13.9 33.99,-22.6 55.62,-22.6 h 0.11 2347.09 0.11 c 21.63,0 41.22,8.7 55.62,22.6 0.32,0.3 0.67,0.6 0.99,0.9 0.42,0.5 0.79,0.9 1.21,1.4 13.76,14.4 22.26,33.8 22.26,55.3 v 0.1 0.9 0.3 c 0,0.4 -0.05,0.7 -0.05,1",fill:"white",id:"path24",transform:"matrix(0.133333, 0, 0, -0.133333, -1166.437378, 1578.525269)"})}),(0,n.jsx)("span",{className:"font-semibold text-xl tracking-tight text-white",children:"Chess Flashcards"})]})}),(0,n.jsx)("div",{className:"w-full flex items-center w-auto",children:(0,n.jsxs)("div",{className:"text-sm flex-grow",children:[(0,n.jsx)(l(),{href:"/about",children:(0,n.jsx)("a",{className:"block mt-4 inline-block mt-0 text-gray-200 hover:text-white mx-2",children:"About"})}),(0,n.jsx)("a",{href:"https://github.com/chanind/chess-flashcards",className:"block mt-4 inline-block mt-0 text-gray-200 hover:text-white mx-2",children:"Github"})]})})]})},o=function(e){var t=e.children;return(0,n.jsxs)("div",{children:[(0,n.jsxs)(s(),{children:[(0,n.jsx)("title",{children:"Chess Flashcards"}),(0,n.jsx)("meta",{name:"description",content:"Chess Flashcards - practice chess openings"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)(a,{}),(0,n.jsx)("main",{className:"container mt-4 mx-auto px-2",children:t})]})}},7046:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return A},default:function(){return R}});var n=r(5893),i=r(9701),s=r(6365),c=r(4867),l=r(5152),a=r.n(l),o=r(7294),d=function(e){return(0,n.jsx)(n.Fragment,{children:e.children})},u=a()((function(){return Promise.resolve(d)}),{ssr:!1}),h=r(2941),x=r(8380),f=r(5976),v=r(8057),m=r(8163),j=r(4924),b=r(6042),y=r(9396),p=r(797),g=r(7306),w=r.n(g),N=function(e){var t={},r=!0,n=!1,i=void 0;try{for(var s,c=e[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){t[s.value]={history:[]}}}catch(l){n=!0,i=l}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return{cardHistories:t,studyingCardIdentifier:w()(e)}},k=function(e){var t,r,n,i=Object.keys(e.cardHistories),s=S(e),c=(s.length>0?s:i).map((function(t){var r;return(null!==(n=null===(r=e.cardHistories[t])||void 0===r?void 0:r.history)&&void 0!==n?n:[]).length}));return 0===s.length?(t=Math).max.apply(t,(0,p.Z)(c))-1:(r=Math).min.apply(r,(0,p.Z)(c))},C=function(e,t){return e.cardHistories[t].history},S=function(e){return Object.keys(e.cardHistories).filter((function(t){return function(e,t){return!e.cardHistories[t].history.includes(!0)}(e,t)}))},Z=function(e){var t=S(e),r=k(e),n=[],i=!0,s=!1,c=void 0;try{for(var l,a=t[Symbol.iterator]();!(i=(l=a.next()).done);i=!0){var o=l.value;C(e,o).length===r&&n.push(o)}}catch(d){s=!0,c=d}finally{try{i||null==a.return||a.return()}finally{if(s)throw c}}return n},_=function(e){var t=e.totalRounds,r=e.totalMistakes,i=e.onStudyAgain,s=0==r?"Perfect score!":"Nice Job!";return(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{className:"text-2xl",children:["\ud83c\udf89 ",s]}),(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsxs)("span",{className:"mr-2 text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-blue-200",children:[t," Rounds"]}),(0,n.jsxs)("span",{className:"mr-2 text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-blue-200",children:[r," Mistakes"]})]}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)("button",{type:"button",className:"text-white bg-blue-600 font-medium rounded-md text-sm px-5 py-2.5 text-center inline-flex items-center mt-4",onClick:i,children:"Study Again"})})]})},M=r(4184),H=r.n(M),I=function(e){var t=e.children,r=e.color;return(0,n.jsx)("span",{className:H()("text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full",{"bg-gray-200":"white"===r,"text-gray-800":"white"===r,"bg-gray-800":"black"===r,"text-gray-400":"black"===r,"bg-blue-200":"blue"===r,"text-blue-600":"blue"===r,"bg-red-200":"red"===r,"text-red-600":"red"===r}),children:t})},O=function(e){var t=e.title,r=e.percent,i=e.label,s=e.totalWrong;return(0,n.jsxs)("div",{className:"relative pt-1",children:[(0,n.jsxs)("div",{className:"flex mb-2 items-center justify-between",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(I,{color:"blue",children:t}),s>0&&(0,n.jsx)("span",{className:"ml-1",children:(0,n.jsx)(I,{color:"red",children:(0,n.jsxs)("span",{className:"flex items-center",children:[(0,n.jsx)(m.Z,{className:"w-3 h-3 text-red-800 inline"}),(0,n.jsxs)("span",{className:"ml-1",children:[s," mistakes"]})]})})})]})}),(0,n.jsx)("div",{className:"text-right",children:(0,n.jsx)("span",{className:"text-xs font-semibold inline-block text-blue-600",children:i})})]}),(0,n.jsx)("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-blue-200",children:(0,n.jsx)("div",{style:{width:"".concat(r,"%")},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500"})})]})},P=function(e){var t,r,i=e.decks,s=e.width,c=(0,o.useRef)(null),l=(0,o.useRef)(),a=function(e){var t={},r=!0,n=!1,i=void 0;try{for(var s,c=e[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value,a=!0,o=!1,d=void 0;try{for(var u,h=l.cards[Symbol.iterator]();!(a=(u=h.next()).done);a=!0){var x=u.value;t["".concat(l.id,"-").concat(x.previousMoves.join("."),"-").concat(x.correctMove)]={card:x,deck:l}}}catch(f){o=!0,d=f}finally{try{a||null==h.return||h.return()}finally{if(o)throw d}}}}catch(f){n=!0,i=f}finally{try{r||null==c.return||c.return()}finally{if(n)throw i}}return t}(i);(0,o.useEffect)((function(){clearTimeout(l.current)}),[]);var d,u=(0,o.useState)(N(Object.keys(a))),g=u[0],M=u[1],H=k(g),P=function(e){var t=k(e);return Object.keys(e.cardHistories).filter((function(r){return!C(e,r).slice(0,t).includes(!0)})).length}(g),A=(d=g,Object.values(d.cardHistories).map((function(e){return e.history.filter((function(e){return!1===e})).length})).reduce((function(e,t){return e+t}),0)),R=Z(g),E=function(e){return 0===S(e).length}(g);if(E)return(0,n.jsx)("div",{className:"pt-6",children:(0,n.jsx)(_,{totalMistakes:A,totalRounds:H+1,onStudyAgain:function(){return M(function(e){return N(Object.keys(e.cardHistories))}(g))}})});var F=a[g.studyingCardIdentifier],T=F.card,W=F.deck,D=new h.qQ,G=T.previousMoves.slice(0,-1),X=T.previousMoves[T.previousMoves.length-1],q=!0,z=!1,B=void 0;try{for(var J,Q=G[Symbol.iterator]();!(q=(J=Q.next()).done);q=!0){var V=J.value;D.move(V)}}catch(ne){z=!0,B=ne}finally{try{q||null==Q.return||Q.return()}finally{if(z)throw B}}var K=D.fen();X&&D.move(X);var L=D.fen(),U=D.moves({verbose:!0}).find((function(e){return e.san===T.correctMove})),Y="b"===D.turn()?"black":"white";D.move(T.correctMove);var $=D.fen(),ee=function(e){var t;return(null===(t=g.intermediateState)||void 0===t?void 0:t.isCorrect)?$:e===f.d0?K:L},te=P-R.length,re=!1===(null===(t=g.intermediateState)||void 0===t?void 0:t.isCorrect);return(0,n.jsx)("div",{className:"my-2",style:{width:"".concat(s,"px")},children:(0,n.jsxs)("div",{children:[(0,n.jsx)(O,{percent:100*te/P,label:"".concat(te," / ").concat(P),title:"Round ".concat(H+1),totalWrong:A}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(f.ZP,{in:!0,timeout:200,appear:!0,exit:!1,nodeRef:c,children:function(e){return(0,n.jsx)("div",{ref:c,children:(0,n.jsx)(x.r,{position:ee(e),boardOrientation:Y,boardWidth:s,arePiecesDraggable:!0,areArrowsAllowed:!1,customArrows:re?[[U.from,U.to]]:[],isDraggablePiece:function(e){return e.piece[0]===Y[0]},onPieceDrop:function(e,t){var r=(null===U||void 0===U?void 0:U.from)===e&&U.to===t;return M(function(e,t){return(0,y.Z)((0,b.Z)({},e),{intermediateState:{isCorrect:t}})}(g,r)),setTimeout((function(){M(function(e,t){var r,n,i=S(e).filter((function(r){return!t||r!==e.studyingCardIdentifier})),s=Z(e).filter((function(t){return t!==e.studyingCardIdentifier}));return{studyingCardIdentifier:null!==(n=null!==(r=w()(s))&&void 0!==r?r:w()(i))&&void 0!==n?n:e.studyingCardIdentifier,cardHistories:(0,y.Z)((0,b.Z)({},e.cardHistories),(0,j.Z)({},e.studyingCardIdentifier,{history:(0,p.Z)(e.cardHistories[e.studyingCardIdentifier].history).concat([t])}))}}(g,r))}),r?300:2e3),r}})})}},g.studyingCardIdentifier),g.intermediateState&&(0,n.jsx)("div",{className:"absolute left-0 top-0 flex z-10 justify-center items-center",style:{width:"".concat(s,"px"),height:"".concat(s,"px")},children:(null===(r=g.intermediateState)||void 0===r?void 0:r.isCorrect)?(0,n.jsx)(v.Z,{className:"h-40 w-40 text-green-500 drop-shadow-lg"}):(0,n.jsx)(m.Z,{className:"h-40 w-40 text-red-500 drop-shadow-lg"})})]}),(0,n.jsxs)("div",{className:"mt-2 flex justify-between",children:[(0,n.jsxs)("h2",{className:"text-xl",children:[W.title," ",(0,n.jsxs)("span",{className:"text-gray-400",children:["Move ",T.previousMoves.length+1]})]}),(0,n.jsxs)("div",{className:"text-xs font-semibold",children:[(0,n.jsx)("span",{className:"hidden sm:inline",children:"Move as"})," ",(0,n.jsx)(I,{color:Y,children:Y})]})]})]})})},A=!0,R=function(e){var t=e.deck,r=(0,i.ZP)(),l=r.observe,a=r.width;return(0,n.jsxs)(c.Z,{children:[(0,n.jsxs)("h1",{className:"text-xl",children:[(0,n.jsx)("span",{className:"text-gray-400",children:"Study"})," ",t.title]}),(0,n.jsxs)("div",{style:{maxWidth:"500px"},ref:l,children:[(0,n.jsxs)("p",{className:"text-gray-600 mt-1 mb-2 text-sm",children:[t.description,(0,n.jsx)("span",{className:"ml-1",children:t.sources.map((function(e,t){return(0,n.jsxs)("a",{href:e.url,className:"text-blue-600 text-xs ml-1",target:"_blank",children:[t+1,(0,n.jsx)(s.Z,{className:"inline h-3 w-3 relative bottom-[2px]"})]},t)}))})]}),(0,n.jsx)("div",{children:(0,n.jsx)(u,{children:(0,n.jsx)(P,{decks:[t],width:a})})})]})]})}}},function(e){e.O(0,[546,996,404,392,774,888,179],(function(){return t=1929,e(e.s=t);var t}));var t=e.O();_N_E=t}]);